import{a as o,p as e,w as U,A as $,v as E,x as k}from"./chunk-B7RQU5TL-DOIyb4rl.js";import{u as P}from"./puter-BzHwi7gT.js";import{c as v}from"./utils-CLdLQqWL.js";const G=({score:s=75})=>{const[t,l]=o.useState(0),a=o.useRef(null),n=s/100;return o.useEffect(()=>{a.current&&l(a.current.getTotalLength())},[]),e.jsx("div",{className:"flex flex-col items-center",children:e.jsxs("div",{className:"relative w-32 h-16 sm:w-40 sm:h-20",children:[e.jsxs("svg",{viewBox:"0 0 100 50",className:"w-full h-full",children:[e.jsx("defs",{children:e.jsxs("linearGradient",{id:"gaugeGradient",x1:"0%",y1:"0%",x2:"100%",y2:"0%",children:[e.jsx("stop",{offset:"0%",stopColor:"#1E3A8A"}),e.jsx("stop",{offset:"50%",stopColor:"#3B82F6"}),e.jsx("stop",{offset:"100%",stopColor:"#60A5FA"})]})}),e.jsx("path",{d:"M10,50 A40,40 0 0,1 90,50",fill:"none",stroke:"#e5e7eb",strokeWidth:"8",strokeLinecap:"round"}),e.jsx("path",{ref:a,d:"M10,50 A40,40 0 0,1 90,50",fill:"none",stroke:"url(#gaugeGradient)",strokeWidth:"8",strokeLinecap:"round",strokeDasharray:t,strokeDashoffset:t*(1-n)})]}),e.jsx("div",{className:"absolute inset-0 flex flex-col items-center justify-center pt-1",children:e.jsxs("div",{className:"text-lg sm:text-xl font-semibold pt-3 text-dark-200",children:[s,"/100"]})})]})})},z=({score:s})=>{let t="",l="";return s>70?(t="bg-badge-green text-green-600",l="Strong"):s>49?(t="bg-badge-yellow text-yellow-600",l="Good Start"):(t="bg-badge-red text-red-600",l="Needs Work"),e.jsx("div",{className:`px-2 sm:px-3 py-1 rounded-full ${t}`,children:e.jsx("p",{className:"text-xs sm:text-sm font-medium",children:l})})},g=({title:s,score:t})=>{const l=t>70?"text-green-600":t>49?"text-yellow-600":"text-red-600";return e.jsx("div",{className:"resume-summary",children:e.jsxs("div",{className:"category",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 items-center justify-center",children:[e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-semibold",children:s}),e.jsx(z,{score:t})]}),e.jsxs("p",{className:"text-lg sm:text-xl md:text-2xl font-bold",children:[e.jsx("span",{className:l,children:t}),"/100"]})]})})},F=({feedback:s})=>e.jsxs("div",{className:"bg-white rounded-xl sm:rounded-2xl shadow-lg w-full",children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center p-4 sm:p-6 gap-4 sm:gap-8",children:[e.jsx(G,{score:s.overallScore}),e.jsxs("div",{className:"flex flex-col gap-2 text-center sm:text-left",children:[e.jsx("h2",{className:"text-xl sm:text-2xl font-bold",children:"Your Resume Score"}),e.jsx("p",{className:"text-sm text-gray-500",children:"This score is calculated based on the variables listed below."})]})]}),e.jsxs("div",{className:"px-4 sm:px-6 pb-4 sm:pb-6",children:[e.jsx(g,{title:"Tone & Style",score:s.toneAndStyle.score}),e.jsx(g,{title:"Content",score:s.content.score}),e.jsx(g,{title:"Structure",score:s.structure.score}),e.jsx(g,{title:"Skills",score:s.skills.score})]})]}),W=({score:s,suggestions:t})=>{const l=s>69?"from-green-100":s>49?"from-yellow-100":"from-red-100",a=s>69?"/icons/ats-good.svg":s>49?"/icons/ats-warning.svg":"/icons/ats-bad.svg",n=s>69?"Great Job!":s>49?"Good Start":"Needs Improvement";return e.jsxs("div",{className:`bg-gradient-to-b ${l} to-white rounded-xl sm:rounded-2xl shadow-lg w-full p-4 sm:p-6`,children:[e.jsxs("div",{className:"flex flex-col sm:flex-row items-center gap-4 mb-4 sm:mb-6",children:[e.jsx("img",{src:a,alt:"ATS Score Icon",className:"w-10 h-10 sm:w-12 sm:h-12"}),e.jsx("div",{className:"text-center sm:text-left",children:e.jsxs("h2",{className:"text-xl sm:text-2xl font-bold",children:["ATS Score - ",s,"/100"]})})]}),e.jsxs("div",{className:"mb-4 sm:mb-6",children:[e.jsx("h3",{className:"text-lg sm:text-xl font-semibold mb-2",children:n}),e.jsx("p",{className:"text-gray-600 mb-4 text-sm sm:text-base",children:"This score represents how well your resume is likely to perform in Applicant Tracking Systems used by employers."}),e.jsx("div",{className:"space-y-3",children:t.map((i,x)=>e.jsxs("div",{className:"flex items-start gap-3",children:[e.jsx("img",{src:i.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:i.type==="good"?"Check":"Warning",className:"w-4 h-4 sm:w-5 sm:h-5 mt-1 flex-shrink-0"}),e.jsx("p",{className:`text-sm sm:text-base ${i.type==="good"?"text-green-700":"text-amber-700"}`,children:i.tip})]},x))})]}),e.jsx("p",{className:"text-gray-700 italic text-sm sm:text-base",children:"Keep refining your resume to improve your chances of getting past ATS filters and into the hands of recruiters."})]})},C=o.createContext(void 0),I=()=>{const s=o.useContext(C);if(!s)throw new Error("Accordion components must be used within an Accordion");return s},D=({children:s,defaultOpen:t,allowMultiple:l=!1,className:a=""})=>{const[n,i]=o.useState(t?[t]:[]),x=c=>{i(r=>l?r.includes(c)?r.filter(N=>N!==c):[...r,c]:r.includes(c)?[]:[c])},d=c=>n.includes(c);return e.jsx(C.Provider,{value:{activeItems:n,toggleItem:x,isItemActive:d},children:e.jsx("div",{className:`space-y-2 ${a}`,children:s})})},h=({id:s,children:t,className:l=""})=>e.jsx("div",{className:`overflow-hidden border-b border-gray-200 ${l}`,children:t}),u=({itemId:s,children:t,className:l="",icon:a,iconPosition:n="right"})=>{const{toggleItem:i,isItemActive:x}=I(),d=x(s),c=e.jsx("svg",{className:v("w-5 h-5 transition-transform duration-200",{"rotate-180":d}),fill:"none",stroke:"#98A2B3",viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg",children:e.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M19 9l-7 7-7-7"})}),r=()=>{i(s)};return e.jsxs("button",{onClick:r,className:`
        w-full px-4 py-3 text-left
        focus:outline-none
        transition-colors duration-200 flex items-center justify-between cursor-pointer
        ${l}
      `,children:[e.jsxs("div",{className:"flex items-center space-x-3",children:[n==="left"&&(a||c),e.jsx("div",{className:"flex-1",children:t})]}),n==="right"&&(a||c)]})},p=({itemId:s,children:t,className:l=""})=>{const{isItemActive:a}=I(),n=a(s);return e.jsx("div",{className:`
        overflow-hidden transition-all duration-300 ease-in-out
        ${n?"max-h-fit opacity-100":"max-h-0 opacity-0"}
        ${l}
      `,children:e.jsx("div",{className:"px-4 py-3 ",children:t})})},H=({score:s})=>e.jsxs("div",{className:v("flex flex-row gap-1 items-center px-2 py-0.5 rounded-[96px]",s>69?"bg-badge-green":s>39?"bg-badge-yellow":"bg-badge-red"),children:[e.jsx("img",{src:s>69?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-4"}),e.jsxs("p",{className:v("text-sm font-medium",s>69?"text-badge-green-text":s>39?"text-badge-yellow-text":"text-badge-red-text"),children:[s,"/100"]})]}),f=({title:s,categoryScore:t})=>e.jsxs("div",{className:"flex flex-col sm:flex-row gap-2 sm:gap-4 items-center py-2",children:[e.jsx("p",{className:"text-lg sm:text-xl md:text-2xl font-semibold",children:s}),e.jsx(H,{score:t})]}),j=({tips:s})=>e.jsxs("div",{className:"flex flex-col gap-4 items-center w-full",children:[e.jsx("div",{className:"bg-gray-50 w-full rounded-lg px-3 sm:px-5 py-3 sm:py-4 grid grid-cols-1 sm:grid-cols-2 gap-3 sm:gap-4",children:s.map((t,l)=>e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("img",{src:t.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-4 sm:size-5 flex-shrink-0"}),e.jsx("p",{className:"text-sm sm:text-base md:text-lg text-gray-500",children:t.tip})]},l))}),e.jsx("div",{className:"flex flex-col gap-3 sm:gap-4 w-full",children:s.map((t,l)=>e.jsxs("div",{className:v("flex flex-col gap-2 rounded-xl sm:rounded-2xl p-3 sm:p-4",t.type==="good"?"bg-green-50 border border-green-200 text-green-700":"bg-yellow-50 border border-yellow-200 text-yellow-700"),children:[e.jsxs("div",{className:"flex flex-row gap-2 items-center",children:[e.jsx("img",{src:t.type==="good"?"/icons/check.svg":"/icons/warning.svg",alt:"score",className:"size-4 sm:size-5 flex-shrink-0"}),e.jsx("p",{className:"text-base sm:text-lg md:text-xl font-semibold",children:t.tip})]}),e.jsx("p",{className:"text-sm sm:text-base",children:t.explanation})]},l+t.tip))})]}),J=({feedback:s})=>e.jsx("div",{className:"flex flex-col gap-4 w-full",children:e.jsxs(D,{children:[e.jsxs(h,{id:"tone-style",children:[e.jsx(u,{itemId:"tone-style",children:e.jsx(f,{title:"Tone & Style",categoryScore:s.toneAndStyle.score})}),e.jsx(p,{itemId:"tone-style",children:e.jsx(j,{tips:s.toneAndStyle.tips})})]}),e.jsxs(h,{id:"content",children:[e.jsx(u,{itemId:"content",children:e.jsx(f,{title:"Content",categoryScore:s.content.score})}),e.jsx(p,{itemId:"content",children:e.jsx(j,{tips:s.content.tips})})]}),e.jsxs(h,{id:"structure",children:[e.jsx(u,{itemId:"structure",children:e.jsx(f,{title:"Structure",categoryScore:s.structure.score})}),e.jsx(p,{itemId:"structure",children:e.jsx(j,{tips:s.structure.tips})})]}),e.jsxs(h,{id:"skills",children:[e.jsx(u,{itemId:"skills",children:e.jsx(f,{title:"Skills",categoryScore:s.skills.score})}),e.jsx(p,{itemId:"skills",children:e.jsx(j,{tips:s.skills.tips})})]})]})}),q=()=>[{title:"StackScore | Review and Feedback"},{name:"description",content:"Description of overview of resume."}],M=()=>{var w,b;const{auth:s,isLoading:t,fs:l,kv:a}=P(),{id:n}=$(),[i,x]=o.useState(""),[d,c]=o.useState(""),[r,N]=o.useState(null),R=E();return o.useEffect(()=>{!t&&!s.isAuthenticated&&R(`/auth?next=/resume/${n}`)},[t,s.isAuthenticated]),o.useEffect(()=>{(async()=>{const y=await a.get(`resume:${n}`);if(!y)return;const m=JSON.parse(y),S=await l.read(m.resumePath);if(!S)return;const L=new Blob([S],{type:"application/pdf"}),T=URL.createObjectURL(L);c(T);const A=await l.read(m.imagePath);if(!A)return;const B=URL.createObjectURL(A);x(B),N(typeof m.feedback=="string"?JSON.parse(m.feedback):m.feedback)})()},[n]),e.jsxs("main",{className:"inset-0 bg-gradient-to-b from-[#1E3A8A]/50 via-[#3B82F6]/50 to-[#60A5FA]/50",children:[e.jsxs("nav",{className:"resume-nav",children:[e.jsx(k,{to:"/",className:"back-button",children:e.jsx("span",{children:"Back to HomePage"})}),e.jsx(k,{to:"/upload",className:"back-button",children:e.jsx("span",{children:"Upload Resume"})})]}),e.jsx("div",{children:i&&d&&r?e.jsxs("div",{className:"flex flex-col",children:[e.jsxs("section",{className:"feedback-section justify-center items-center gap-4 sm:gap-6 lg:gap-8 min-h-[100vh] px-4 sm:px-6 md:px-8 lg:px-10 py-4 sm:py-6",children:[e.jsx("div",{className:"page-heading py-16",children:e.jsx("h1",{children:"Your Analyzed Resume."})}),e.jsxs("div",{className:"flex flex-col xl:flex-row items-center justify-center gap-6 sm:gap-8 xl:gap-12 w-full max-w-7xl",children:[e.jsx("div",{className:"w-full max-w-2xl xl:flex-1",children:e.jsx(F,{feedback:r})}),e.jsx("div",{className:"animate-in fade-in duration-1000 gradient-border w-full max-w-lg xl:max-w-xl xl:flex-1",children:e.jsx("a",{href:d,target:"_blank",rel:"noopener noreferrer",children:e.jsx("img",{src:i,className:"w-full h-auto object-contain rounded-sm",title:"resume",alt:"resume"})})})]})]}),e.jsxs("section",{className:"feedback-section px-4 sm:px-6 md:px-8 lg:px-10 gap-y-4 sm:gap-y-6",children:[e.jsxs("div",{className:"w-full",children:[e.jsx("h2",{className:"text-2xl sm:text-3xl font-bold mb-4",children:"Suggestions"}),e.jsx(W,{score:((w=r==null?void 0:r.ATS)==null?void 0:w.score)||0,suggestions:((b=r==null?void 0:r.ATS)==null?void 0:b.tips)||[]})]}),e.jsx("div",{className:"w-full",children:e.jsx(J,{feedback:r})})]})]}):e.jsx("div",{className:"page-heading py-16",children:e.jsx("h2",{className:"text-center",children:"Please wait, we are loading the results..."})})})]})},Q=U(M);export{Q as default,q as meta};
